##################
#    MONITORS    #
##################


### Default
monitor = , preferred, auto-right, auto


### Known

# Internal
# monitor = eDP-1, disable
# monitor = eDP-1, 3200x2000@120.00, 0x1080, 1.6, vrr, 1

# Home
# monitor = desc:Samsung Electric Company S24F350 H4ZN911731, disable
# monitor = desc:Samsung Electric Company S24F350 H4ZN911731, 1920x1080@71.91, 0x0, 1, vrr, 1



##############################
#    PROGRAMS / SHORTCUTS    #
##############################


### For more easy life

# Devices variables
$externalKB = gaming-keyboard
$internalKB = at-translated-set-2-keyboard
$mouse-wireless = compx-2.4g-wireless-receiver
$mouse-wired = compx-2.4g-dual-mode-mouse
$touchpad = elan2310:00-04f3:3238-touchpad

# Rofi existence check
$rofiExistCheck = pgrep -x rofi >/dev/null 2>&1 && killall rofi ||

# Current GTK theme
$gtkTheme = GTK_THEME=Gruvbox-Teal-Dark-Medium

# Alpha
$alpha1 = 0.89
$alpha2 = 0.8


### Programs

# Dmenu (rofi)
$appLauncher = $rofiExistCheck rofi -show drun -config launcher.rasi
$clipboard = $rofiExistCheck cliphist list | rofi -dmenu | cliphist decode | wl-copy
$alttab = $rofiExistCheck rofi -show window -config search.rasi
$search = $rofiExistCheck rofi -show calc -config search.rasi
$runner = $rofiExistCheck rofi -show run -config search.rasi
$powerMenu = $rofiExistCheck rofi -show -menu modi menu:$XDG_CONFIG_HOME/rofi/power-menu.sh -theme systems.rasi

# Notification center (SwayNC)
$swaync = swaync-client -t -sw

# Terminal (Ghostty)
$terminal = kitty

# File manager (Nemo)
$fileManager = nemo

# Task manager (Mission Center)
$taskManager = $gtkTheme missioncenter

# Bluetooth (Overskride)
$bluetooth = "../rofi/bluetooth.sh"

# Screenshot (Hyprshot)
$screenshot-region = hyprshot -m region --clipboard-only
$screenshot-screen = hyprshot -m output --clipboard-only

# IDE (VSCode)
$ide = code

# Color picker (Hyprpicker) with storing to clipboard (cliphist)
$colorPicker = hyprpicker | cliphist store

# KDE Connect
$kdeConnect = kdeconnectd && kdeconnect-indicator


### Scripts

# Wallpaper changer
$wallpaperChanger = ~/.config/hypr/wallpaper_changer.sh





###################
#    AUTOSTART    #
###################


### Crucial services

# Polkit
exec-once = systemctl --user start hyprpolkitagent


### Required programs

# Hypridle
exec-once = systemctl --user start hypridle.service

# Wallpaper changer
exec-once = systemctl --user start hyprpaper-changer.timer

# SwayOSD
exec-once = swayosd-server

#Sway Notification Center
exec-once = systemctl --user start swaync

# Clipboard manager
exec-once = wl-paste --type text --watch cliphist store # Stores only text data
exec-once = wl-paste --type image --watch cliphist store # Stores only image data

# SWWW
exec-once = swww-daemon

# Bars and widgets
exec-once = systemctl --user start waybar

# KDE Connect
exec-once = $kdeConnect


### Other

# Cursor fix
exec-once = hyprctl setcursor Adwaita 24



#####################
#    ENVIRONMENT    #
#####################


### Variables for proper xwayland scaling

env = ELECTRON_OZONE_PLATFORM_HINT,wayland
# env = GDK_SCALE,2
# env = GDK_DPI_SCALE,0.75       # or adjust so that GTK UI isn't huge
# env = QT_AUTO_SCREEN_SCALE_FACTOR,1
# env = QT_ENABLE_HIGHDPI_SCALING,1
# env = QT_SCALE_FACTOR,1.5



#######################
#    CONFIGURATION    #
#######################


### Styling

# General
general {
    # Gaps
    gaps_in = 2
    gaps_out = 4
    gaps_workspaces = -4

    # Borders
    border_size = 1
    col.active_border = rgba(ebdbb2ff)
    col.inactive_border = rgba(928374ff)

    # Resize
    resize_on_border = true
    hover_icon_on_border = true

    layout = dwindle
}

# Decoration
decoration {
    # Rounding
    rounding = 8
    rounding_power = 2

    # Opacity
    active_opacity = 1
    inactive_opacity = $alpha1

    shadow {
        enabled = false
        range = 4
        render_power = 3
        color =rgb(40, 40, 40)
    }

    blur {
        enabled = false
        size = 3
        passes = 5

        vibrancy = 0.1696
    }
}

# Animations
animations {
    enabled = true

    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 3, easeOutQuint
    animation = workspacesIn, 1, 3, easeOutQuint
    animation = workspacesOut, 1, 3, easeOutQuint
}


### Necessary tweaks

# Dwindle
dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # You probably want this
}

# idk lol
master {
    new_status = master
}

misc {
    force_default_wallpaper = 1 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = true # If true disables the random hyprland logo / anime girl background. :(
    font_family = "Adwaita Sans"
}

cursor {
    no_break_fs_vrr = 1
    no_warps = true
}

xwayland {
    use_nearest_neighbor = false
    # force_zero_scaling = true
}



###############
#    INPUT    #
###############


### General
input {
    kb_layout = us, ru
    kb_variant = ,
    follow_mouse = 2
    mouse_refocus = false
    float_switch_override_focus = 0
}


### Per-device configs

# External keyboard
device {
    name = $externalKB
}

# Internal keyboard
device {
    name = $internalKB
}

# Touchpad
device {
    name = $touchpad
    natural_scroll = true
}

# Mouse (wireless)
device {
    name = $mouse-wireless
    accel_profile = flat
    # sensitivity = -0.9
    sensitivity = -0.5
}

# Mouse (wired)
device {
    name = $mouse-wired
    accel_profile = flat
    sensitivity = -0.5
}



#####################
#    KEYBINDINGS    #
#####################


### Main mod button (Super / Windows)
$mainMod = SUPER


### Window and workspaces management

## Windows

# Close window
bind = Alt, F4, killactive,

# Make active window on top
bind = $mainMod, Up, fullscreen, 1

# Make active window fullscreen
bind = Alt, F10, fullscreen, 0

# Make active window floating
bind = $mainMod, F, togglefloating,

# Switch split between tiles
bind = $mainMod, N, togglesplit,

# Old Alt+Tab window switch
bind = Alt, Tab, cyclenext,
bind = Alt, Tab, bringactivetotop,

# Mouse interactions
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Moving windows to next / previous workspaces
bind = $mainMod Alt, L, movetoworkspace, r+1
bind = $mainMod Alt, H, movetoworkspace, r-1
# Same, but to the exact workspace
bind = $mainMod Alt, 1, movetoworkspace, 1
bind = $mainMod Alt, 2, movetoworkspace, 2
bind = $mainMod Alt, 3, movetoworkspace, 3
bind = $mainMod Alt, 4, movetoworkspace, 4
bind = $mainMod Alt, 5, movetoworkspace, 5
bind = $mainMod Alt, 6, movetoworkspace, 6
bind = $mainMod Alt, 7, movetoworkspace, 7
bind = $mainMod Alt, 8, movetoworkspace, 8
bind = $mainMod Alt, 9, movetoworkspace, 9
bind = $mainMod Alt, 0, movetoworkspace, 10

# Switch between windows with keyboard
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

## Workspaces

# Switch to next / previous workspace
bind = $mainMod Control, L, workspace, r+1
bind = $mainMod Control, H, workspace, r-1
# Same, but to the exact workspace
bind = $mainMod Control, 1, workspace, 1
bind = $mainMod Control, 2, workspace, 2
bind = $mainMod Control, 3, workspace, 3
bind = $mainMod Control, 4, workspace, 4
bind = $mainMod Control, 5, workspace, 5
bind = $mainMod Control, 6, workspace, 6
bind = $mainMod Control, 7, workspace, 7
bind = $mainMod Control, 8, workspace, 8
bind = $mainMod Control, 9, workspace, 9
bind = $mainMod Control, 0, workspace, 10


### System control

## Power and session management

# Turn off
bind = Control Alt, End, exec, systemctl shutdown

# Reboot
bind = Control Alt, Home, exec, systemctl reboot

# Lock screen
bind = $mainMod, M, exec, systemctl suspend

# Logout, stop session
bind = Control Alt, Delete, exec, $powerMenu

## Useful shortcuts / utilities

# Change keyboard layout
bind = $mainMod, Space, exec, hyprctl switchxkblayout all next

# Take screenshot
bind = $mainMod Shift, S, exec, $screenshot-region
bind = $mainMod Control, S, exec, $screenshot-screen

# Pick a color
bind = $mainMod Shift, C, exec, $colorPicker

# Notification center
bind = $mainMod, W, exec, $swaync

## Volume and brightness control

# With SwayOSD
bindel = ,XF86AudioRaiseVolume, exec, swayosd-client --output-volume 5
bindel = ,XF86AudioLowerVolume, exec, swayosd-client --output-volume -5
bindel = ,XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindel = ,XF86MonBrightnessUp, exec, swayosd-client --brightness +5
bindel = ,XF86MonBrightnessDown, exec, swayosd-client --brightness -5

# Without SwayOSD
# bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
# bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
# bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
# bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

## Media control

# With special keys
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

# With common keys
# bindl = Control Shift, Up, exec, playerctl next
# bindl = Control Shift, Down, exec, playerctl previous
# bindl = Control Shift, Left, exec, playerctl position 5-
# bindl = Control Shift, Right, exec, playerctl position 5+
# bindl = Control Shift, Space, exec, playerctl play-pause

## Turning off internal screen when lid closed
bindl = , switch:on:Lid Switch, exec, hyprctl keyword monitor "eDP-1, disable"
bindl = , switch:off:Lid Switch, exec, hyprctl keyword monitor "eDP-1, 3200x2000@120.00, 0x1080, 1.6, vrr, 1"


### Applications

# App launcher
bind = $mainMod, Super_L, exec, $appLauncher

# Clipboard manager
bind = $mainMod, V, exec, $clipboard

# Alt+Tab window switch
bind = $mainMod, Tab, exec, $alttab

# Wallpaper changer
bind = $mainMod, Z, exec, $wallpaperChanger

# Search utility
bind = $mainMod, S, exec, $search

# Bluetooth
bind = $mainMod, B, exec, $bluetooth

# Runner
bind = $mainMod, R, exec, $runner

# Terminal
bind = $mainMod, T, exec, $terminal

# File manager
bind = $mainMod, E, exec, $fileManager

# IDE
bind = $mainMod, I, exec, $ide

# Task manager
bind = Control Shift, Escape, exec, $taskManager


### Gestures

# Workspace swipe
gesture = 3, horizontal, workspace
gesture = 4, horizontal, workspace

# App launcher
gesture = 3, up, dispatcher, exec, $appLauncher

# Window switcher
gesture = 3, down, dispatcher, exec, $alttab

# Float
gesture = 4, pinchout, float, float
gesture = 4, pinchin, float, tile

# Resize active window
gesture = 3, swipe, mod: Alt, resize



##################################
#    WINDOW / WORKSPACE RULES    #
##################################

### General
windowrule = suppressevent maximize, class:.*
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# No blur for fullscreen apps
windowrule = noblur, fullscreen:1
